<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Marketing & UX Flashcards (MCQ)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #020617;
      color: #e5e7eb;
      min-height: 100vh;
      padding: 2rem 1rem 3rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.25rem;
    }

    h1 {
      margin: 0;
    }

    .controls {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
      justify-content: center;
      width: 100%;
      max-width: 680px;
    }

    button {
      padding: 0.55rem 1.2rem;
      border-radius: 999px;
      border: none;
      background: #38bdf8;
      color: #020617;
      font-weight: 700;
      cursor: pointer;
      transition: transform 0.1s ease, box-shadow 0.2s ease;
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 25px rgba(56, 189, 248, 0.35);
    }

    .deck {
      width: 100%;
      max-width: 780px;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
    }

    .progress {
      font-size: 0.95rem;
      letter-spacing: 0.02em;
      color: #cbd5e1;
    }

    .card {
      width: 100%;
      max-width: 780px;
      height: 360px;
      perspective: 1200px;
      cursor: pointer;
      touch-action: pan-y;
    }

    .card-inner {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.4s ease;
      border-radius: 18px;
      box-shadow: 0 25px 60px rgba(0, 0, 0, 0.35);
    }

    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }

    .face {
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, #0f172a, #111827);
      border-radius: 18px;
      padding: 1.25rem;
      backface-visibility: hidden;
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
    }

    .back {
      transform: rotateY(180deg);
      background: linear-gradient(135deg, #0b3b5c, #0a4b78);
      color: #e5f2ff;
    }

    .meta {
      font-size: 0.9rem;
      color: #93c5fd;
      letter-spacing: 0.02em;
    }

    h2 {
      font-size: 1.05rem;
      margin: 0;
      line-height: 1.4;
    }

    ul {
      padding-left: 1.1rem;
      margin: 0;
      display: grid;
      gap: 0.25rem;
      font-size: 0.95rem;
    }

    .answer {
      font-weight: 700;
    }

    .nav-hint {
      font-size: 0.85rem;
      color: #94a3b8;
    }
  </style>
</head>
<body>

<h1>Flashcards</h1>

<div class="controls">
  <button id="prevBtn">← Prev</button>
  <button id="shuffleBtn">Shuffle</button>
  <button id="resetBtn">Reset</button>
  <button id="nextBtn">Next →</button>
</div>

<div class="deck">
  <div class="progress" id="progress"></div>
  <div class="card" id="card">
    <div class="card-inner" id="cardInner">
      <div class="face front" id="front"></div>
      <div class="face back" id="back"></div>
    </div>
  </div>
  <div class="nav-hint">Tap to flip · Swipe left/right or use buttons to navigate</div>
</div>

<!-- ✅ LOAD DATA FILE -->
<script src="cards.js"></script>

<!-- ✅ MAIN APP LOGIC -->
<script>
  const progressEl = document.getElementById("progress");
  const cardEl = document.getElementById("card");
  const cardInner = document.getElementById("cardInner");
  const front = document.getElementById("front");
  const back = document.getElementById("back");

  let order = [...cards];
  let index = 0;
  let didSwipe = false;

  const shuffle = (arr) => [...arr].sort(() => Math.random() - 0.5);

  const toggleFlip = () => {
    cardEl.classList.toggle("flipped");
  };

  function renderCard() {
    const current = order[index];
    cardEl.classList.remove("flipped");

    front.innerHTML = `
      <div class="meta">${current.topic || "Topic"}</div>
      <h2>${current.question}</h2>
      <ul>${current.options.map(o => `<li>${o}</li>`).join("")}</ul>
    `;

    back.innerHTML = `
      <div class="answer">Answer: ${current.answer}</div>
      <div>${current.explanation || ""}</div>
    `;

    progressEl.textContent = `Card ${index + 1} / ${order.length}`;
  }

  function next() {
    index = (index + 1) % order.length;
    renderCard();
  }

  function prev() {
    index = (index - 1 + order.length) % order.length;
    renderCard();
  }

  cardEl.addEventListener("click", () => {
    if (didSwipe) {
      didSwipe = false;
      return;
    }
    toggleFlip();
  });

  let touchStartX = 0;
  cardEl.addEventListener("touchstart", (e) => {
    touchStartX = e.touches[0].clientX;
  });
  cardEl.addEventListener("touchend", (e) => {
    const deltaX = e.changedTouches[0].clientX - touchStartX;
    if (Math.abs(deltaX) > 40) {
      didSwipe = true;
      deltaX < 0 ? next() : prev();
    } else {
      toggleFlip();
      didSwipe = true;
    }
  });

  document.getElementById("nextBtn").onclick = next;
  document.getElementById("prevBtn").onclick = prev;
  document.getElementById("shuffleBtn").onclick = () => {
    order = shuffle(cards);
    index = 0;
    renderCard();
  };
  document.getElementById("resetBtn").onclick = () => {
    order = [...cards];
    index = 0;
    renderCard();
  };

  renderCard();
</script>

</body>
</html>
